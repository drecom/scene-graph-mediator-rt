{"version":3,"sources":["webpack://pixi-scene-graph/webpack/universalModuleDefinition","webpack://pixi-scene-graph/webpack/bootstrap","webpack://pixi-scene-graph/./src/exporter/Exporter.ts","webpack://pixi-scene-graph/./src/exporter/Pixi.ts","webpack://pixi-scene-graph/./src/importer/Importer.ts","webpack://pixi-scene-graph/./src/importer/Pixi.ts","webpack://pixi-scene-graph/./src/index.ts"],"names":[],"mappings":"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","file":"scene-graph-mediator-rt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pixi-scene-graph\"] = factory();\n\telse\n\t\troot[\"pixi-scene-graph\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { SchemaJson, Node } from '@drecom/scene-graph-schema';\n\n/**\n * Abstract class for runtime mediation.<br />\n * It handles runtime object like Unity's GameObject or Cocos's Node\n */\nexport default abstract class Exporter {\n  /**\n   * Export current runtime node structure to desired format\n   * like text tree or raw intermediates.<br />\n   * FIXME: Child node(s) added in constructor may duplicate.\n   */\n  public export(rootNode: any, width: number, height: number): SchemaJson {\n    return this.createSchema(rootNode, width, height);\n  }\n\n  /**\n   * Create Schema from base node.\n   */\n  abstract createSchema(base: any, width: number, height: number): SchemaJson;\n  /**\n   * Create Schema from base node.\n   */\n  abstract createNode(base: any): Node;\n}\n","import { SchemaJson, Node } from '@drecom/scene-graph-schema';\nimport Exporter from 'exporter/Exporter';\n\n/**\n * Abstract class for runtime mediation.<br />\n * It handles runtime object like Unity's GameObject or Cocos's Node\n */\nexport default class Pixi extends Exporter {\n\n  public createSchema(scene: any, width: number, height: number): SchemaJson {\n    const root: SchemaJson = {\n      scene: this.createNodeRecursive(scene),\n      metadata: {\n        width,\n        height,\n        positiveCoord: {\n          xRight: true,\n          yDown:  true\n        }\n      }\n    };\n\n    return root;\n  }\n\n  public createNode(base: any): Node {\n    const className = base.constructor.name;\n\n    const node: Node = {\n      id: base.name,\n      name: base.name,\n      constructorName: className,\n      transform: {\n        x: base.position.x,\n        y: base.position.y,\n        anchor: {\n          x: 0,\n          y: 0\n        }\n      }\n    };\n\n    if (base.parent) {\n      node.transform.parent = base.parent.name;\n    }\n\n    if (base.children) {\n      node.transform.children = [];\n      for (let i = 0; i < base.children.length; i++) {\n        node.transform.children.push(base.children[i].name);\n      }\n    }\n\n    switch (className) {\n      case 'Spine': break; // TODO:\n      case 'Sprite': {\n        // TODO: base64 image\n        node.sprite =  {\n          url : base.texture.baseTexture.imageUrl\n        };\n        break;\n      }\n      case 'Text': {\n        node.text = {\n          text: base.text,\n          style: {\n            size: base.style.fontSize,\n            color: base.style.fill\n          }\n        };\n        break;\n      }\n    }\n\n    // extras\n    node.properties = {};\n\n    // for..in iterator crawls all properties includes prototype\n    const keys = Object.keys(base);\n    for (let i = 0; i < keys.length; i++) {\n      const key   = keys[i];\n      const value = base[key];\n\n      const valueType = typeof value;\n      // restrict to JSON types\n      if (valueType === 'string' || valueType === 'number' || valueType === 'boolean') {\n        node.properties[key] = value;\n      }\n    }\n\n    return node;\n  }\n\n  private createNodeRecursive(base: any): Node[] {\n    let nodes = [];\n    nodes.push(this.createNode(base));\n\n    if (base.children) {\n      for (let i = 0; i < base.children.length; i++) {\n        nodes = nodes.concat(this.createNodeRecursive(base.children[i]));\n      }\n    }\n\n    return nodes;\n  }\n}\n","import { SchemaJson, Node } from '@drecom/scene-graph-schema';\n\n/**\n * Abstract class for runtime mediation.<br />\n * It handles runtime object like Unity's GameObject or Cocos's Node\n */\nexport default abstract class Importer {\n  /**\n   * Returns initiate methods related to class name.<br />\n   * Often it is used to define initiation of a class instance\n   * with constructor that has argument.<br />\n   * Initiators are defined in each runtime implementation and it should be augmented by user.<br />\n   * Remarks: This is an experimental design and may be changed in the future.\n   */\n  public getInitiator(_name: string): (node: Node) => any {\n    return () => {};\n  }\n  public hasInitiator(_name: string): boolean {\n    return false;\n  }\n\n  /**\n   * Import Schema and rebuild runtime node structure.\n   */\n  abstract import(schema: SchemaJson, callback: (root: any) => void): any;\n}\n","import { SchemaJson, Node } from '@drecom/scene-graph-schema';\nimport Importer from 'importer/Importer';\n\nconst TO_RADIAN = Math.PI / 180;\n\n/**\n * Pixi implementation of RuntimeMediator\n */\nexport default class Pixi extends Importer {\n\n  public onLoaderAdd: (node: Node, asset: { url: string, name: string }) => void\n    = (_node: Node, _asset: { url: string, name: string }) => {};\n\n  public getInitiator(name: string): (node: Node) => any {\n    return (_node) => { return new (PIXI as any)[name](); };\n  }\n\n  public hasInitiator(name: string): boolean {\n    return PIXI.hasOwnProperty(name);\n  }\n\n  public import(schema: SchemaJson, callback: (root: any) => void = (_) => {}): any {\n    const root = new PIXI.Container();\n\n    // resources\n    const assets = [];\n    for (let i = 0; i < schema.scene.length; i++) {\n      let url, name;\n\n      const node = schema.scene[i];\n      if (node.spine) {\n        url  = node.spine.url;\n        name = node.id;\n      } else if (node.sprite) {\n        if (node.sprite.atlasUrl) {\n          url  = node.sprite.atlasUrl;\n          name = `${node.id}_atlas`;\n        } else {\n          url  = node.sprite.url;\n          name = node.id;\n        }\n      } else {\n        continue;\n      }\n\n      const asset = { url, name };\n\n      this.onLoaderAdd(node, asset);\n      assets.push(asset);\n    }\n\n    if (assets.length > 0) {\n      PIXI.loader.add(assets).load(() => {\n        this.restoreScene(root, schema);\n        callback(root);\n      });\n    } else {\n      this.restoreScene(root, schema);\n      callback(root);\n    }\n\n    return root;\n  }\n\n  private restoreScene(root: PIXI.Container, schema: SchemaJson): void {\n    const resources = PIXI.loader.resources;\n\n    // create Map\n    const nodeMap = new Map<string, Node>();\n    for (let i = 0; i < schema.scene.length; i++) {\n      const node = schema.scene[i];\n      nodeMap.set(node.id, node);\n    }\n\n    const containerMap = this.createContainers(nodeMap, resources);\n\n    this.restoreTransform(root, schema, nodeMap, containerMap);\n  }\n\n  private createContainers(\n    nodeMap: Map<string, Node>,\n    resources: any\n  ): Map<string, PIXI.Container> {\n    const containerMap = new Map<string, PIXI.Container>();\n\n    nodeMap.forEach((node, id) => {\n      let object: any;\n\n      if (node.spine) {\n        // object = new PIXI.spine.Spine(resources[node.id].data);\n      } else if (node.sprite) {\n        // TODO: base64 image\n        let texture = (node.sprite.atlasUrl)\n          ? PIXI.Texture.fromFrame(node.sprite.frameName)\n          : resources[node.id].texture;\n        object = new PIXI.Sprite(texture);\n      } else if (node.text) {\n        const style = new PIXI.TextStyle({});\n        if (node.text.style) {\n          style.fontSize  = node.text.style.size || 26;\n          style.fill      = node.text.style.color || 'black';\n          switch (node.text.style.horizontalAlign) {\n            case 2 : style.align = 'right'; break;\n            case 1 : style.align = 'center'; break;\n            case 0 :\n            default: style.align = 'left'; break;\n          }\n        }\n        object = new PIXI.Text(node.text.text || '', style);\n      } else if (this.hasInitiator(node.constructorName)) {\n        object = this.getInitiator(node.constructorName)(node);\n      } else {\n        object = new PIXI.Container();\n      }\n\n      if (!object) {\n        return;\n      }\n\n      object.name = node.name;\n\n      containerMap.set(id, object);\n    });\n\n    return containerMap;\n  }\n\n  private restoreTransform(\n    root: PIXI.Container,\n    schema: SchemaJson,\n    nodeMap: Map<string, Node>,\n    containerMap: Map<string, PIXI.Container>\n  ): void {\n    const metadata = schema.metadata;\n\n    const coordMul = {\n      x: (metadata.positiveCoord.xRight ? 1 : -1),\n      y: (metadata.positiveCoord.yDown  ? 1 : -1)\n    };\n\n    containerMap.forEach((container, id) => {\n      const node = nodeMap.get(id);\n      if (!node) {\n        return;\n      }\n\n      const parentSize = {\n        width:  metadata.width,\n        height: metadata.height\n      };\n\n      const transform = node.transform;\n\n      if (transform.parent === undefined) {\n        root.addChild(container);\n      } else {\n        const parentContainer = containerMap.get(transform.parent);\n        const parentNode      = nodeMap.get(transform.parent);\n        if (!parentContainer || !parentNode) {\n          return;\n        }\n\n        parentSize.width  = parentNode.transform.width  || 0;\n        parentSize.height = parentNode.transform.height || 0;\n\n        parentContainer.addChild(container);\n      }\n\n      const containerSize = {\n        width:  (transform.width  === undefined) ? container.width  : transform.width,\n        height: (transform.height === undefined) ? container.height : transform.height\n      };\n\n      const scale = (transform.scale) ? {\n        x: transform.scale.x,\n        y: transform.scale.y\n      } : { x: 1, y: 1 };\n      const rotation = (transform.rotation) ? transform.rotation * TO_RADIAN : 0;\n\n      container.scale.set(scale.x, scale.y);\n      container.rotation = rotation;\n\n      let x = transform.x * coordMul.x;\n      let y = transform.y * coordMul.y;\n      x += (parentSize.width  - containerSize.width  * scale.x) * transform.anchor.x;\n      y += (parentSize.height - containerSize.height * scale.y) * transform.anchor.y;\n\n      if ((container as PIXI.Sprite).anchor) {\n        (container as PIXI.Sprite).anchor.set(transform.anchor.x, transform.anchor.y);\n        x += containerSize.width  * scale.x * transform.anchor.x;\n        y += containerSize.height * scale.y * transform.anchor.y;\n      }\n\n      container.position.set(x, y);\n    });\n  }\n}\n","// tslint:disable-next-line import-name\nimport Importer from 'importer/Pixi';\n// tslint:disable-next-line import-name\nimport Exporter from 'exporter/Pixi';\n\nexport {\n  Importer,\n  Exporter\n};\n"],"sourceRoot":""}